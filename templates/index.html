<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Time Code Comparator</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>Time Code Comparator</h1>
    <p>Browse common time codes, auto-detect your offset, and compare quickly.</p>
  </header>

  <section class="controls">
    <form id="compare-form">
      <div class="control">
        <label for="my_tz">Your time code</label>
        <select id="my_tz" name="my_tz">
          {% for z in zones %}
            <option value="{{ z }}" {% if z == my_tz %}selected{% endif %}>{{ z }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="control">
        <label for="other_tz">Compare with</label>
        <select id="other_tz" name="other_tz">
          {% for z in zones %}
            <option value="{{ z }}" {% if z == other_tz %}selected{% endif %}>{{ z }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="control">
        <label for="base_time">Time</label>
        <input type="time" id="base_time" name="base_time" value="{{ diff.a.strftime('%H:%M') }}" />
      </div>

      <div class="control buttons">
        <button type="button" id="swap">Swap</button>
        <button type="button" id="compare">Compare</button>
      </div>
    </form>
    <small class="hint">Tip: Your browser's offset auto-fills on load; you can still pick any code.</small>
  </section>

  <section class="result">
    <h2>Now</h2>
    <div class="cards">
      <div class="card">
        <h3 id="my_tz_label">{{ my_tz }}</h3>
        <p class="time" id="my_time">{{ diff.a.strftime('%Y-%m-%d %H:%M') }}</p>
        <p class="offset" id="my_offset">UTC {{ diff.a.strftime('%z')[:3] }}:{{ diff.a.strftime('%z')[3:5] }}</p>
      </div>
      <div class="card arrow">â†’</div>
      <div class="card">
        <h3 id="other_tz_label">{{ other_tz }}</h3>
        <p class="time" id="other_time">{{ diff.b.strftime('%Y-%m-%d %H:%M') }}</p>
        <p class="offset" id="other_offset">UTC {{ diff.b.strftime('%z')[:3] }}:{{ diff.b.strftime('%z')[3:5] }}</p>
      </div>
    </div>
    <p class="delta" id="diff_text">{{ diff.description }} ({{ diff.pretty }})</p>
  </section>

  <section class="table-section">
    <h2>Quick conversion</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Label</th>
          <th>{{ my_tz }}</th>
          <th>{{ other_tz }}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in conversion %}
        <tr>
          <td>{{ row.label }}</td>
          <td>{{ row.a.strftime('%a %Y-%m-%d %H:%M') }}</td>
          <td>{{ row.b.strftime('%a %Y-%m-%d %H:%M') }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <section class="table-section">
    <h2>All time codes</h2>
    <input id="search" type="search" placeholder="Search codes (e.g., UTC+02:00, CET)" />
    <table class="table" id="zones-table">
      <thead>
        <tr>
          <th>Zone</th>
          <th>Local time</th>
          <th>UTC offset</th>
        </tr>
      </thead>
      <tbody>
        {% for r in all_rows %}
        <tr>
          <td>{{ r.zone }} <small class="tz-abbr">{{ r.abbr }}</small></td>
          <td>{{ r.now.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>{{ r.offset }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <footer>
    <p>Built with Flask using fixed UTC offsets.</p>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>
